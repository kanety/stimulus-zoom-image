{"version":3,"file":"index.modern.mjs","sources":["../src/index.js"],"sourcesContent":["import { Controller } from '@hotwired/stimulus';\nimport '@kanety/stimulus-static-actions';\n\nexport default class extends Controller {\n  static actions = [\n    ['element', 'mouseenter->on'],\n    ['element', 'mouseleave->off'],\n    ['element', 'mousemove->move']\n  ];\n\n  get image() {\n    return this.scope.findElement('img');\n  }\n\n  on(e) {\n    if (!this.canZoom()) return;\n    this.element.style.backgroundImage = `url(\"${this.image.src}\")`;\n    this.element.style.backgroundPosition = '0 0';\n    this.element.style.backgroundRepeat = 'no-repeat';\n    this.image.style.visibility = 'hidden';\n  }\n\n  off(e) {\n    if (!this.canZoom()) return;\n    this.element.style.backgroundImage = '';\n    this.element.style.backgroundPosition = '';\n    this.element.style.backgroundRepeat = '';\n    this.image.style.visibility = '';\n  }\n\n  move(e) {\n    if (!this.canZoom()) return;\n    let rect = this.element.getBoundingClientRect();\n    let x = (e.clientX - rect.left) / rect.width;\n    let y = (e.clientY - rect.top) / rect.height;\n    this.element.style.backgroundPosition = `${x*100}% ${y*100}%`;\n  }\n\n  canZoom() {\n    let rect = this.element.getBoundingClientRect();\n    return rect.width < this.image.naturalWidth || rect.height < this.image.naturalHeight;\n  }\n}\n"],"names":["_Class","Controller","image","scope","findElement","on","e","this","canZoom","element","style","backgroundImage","src","backgroundPosition","backgroundRepeat","visibility","off","move","rect","getBoundingClientRect","clientX","left","width","clientY","top","height","naturalWidth","naturalHeight","actions"],"mappings":"wFAGeA,MAAAA,UAAcC,EAO3B,SAAIC,GACF,YAAYC,MAAMC,YAAY,MAChC,CAEAC,EAAAA,CAAGC,GACIC,KAAKC,YACVD,KAAKE,QAAQC,MAAMC,gBAAkB,QAAQJ,KAAKL,MAAMU,QACxDL,KAAKE,QAAQC,MAAMG,mBAAqB,MACxCN,KAAKE,QAAQC,MAAMI,iBAAmB,YACtCP,KAAKL,MAAMQ,MAAMK,WAAa,SAChC,CAEAC,GAAAA,CAAIV,GACGC,KAAKC,YACVD,KAAKE,QAAQC,MAAMC,gBAAkB,GACrCJ,KAAKE,QAAQC,MAAMG,mBAAqB,GACxCN,KAAKE,QAAQC,MAAMI,iBAAmB,GACtCP,KAAKL,MAAMQ,MAAMK,WAAa,GAChC,CAEAE,IAAAA,CAAKX,GACH,IAAKC,KAAKC,UAAW,OACrB,IAAIU,EAAOX,KAAKE,QAAQU,wBAGxBZ,KAAKE,QAAQC,MAAMG,mBAAqB,IAF/BP,EAAEc,QAAUF,EAAKG,MAAQH,EAAKI,MAEM,SADpChB,EAAEiB,QAAUL,EAAKM,KAAON,EAAKO,OACiB,MACzD,CAEAjB,OAAAA,GACE,IAAIU,EAAOX,KAAKE,QAAQU,wBACxB,OAAOD,EAAKI,MAAQf,KAAKL,MAAMwB,cAAgBR,EAAKO,OAASlB,KAAKL,MAAMyB,aAC1E,EACD3B,EAtCQ4B,QAAU,CACf,CAAC,UAAW,kBACZ,CAAC,UAAW,mBACZ,CAAC,UAAW"}