{"version":3,"file":"index.module.js","sources":["../src/index.js"],"sourcesContent":["import { Controller } from '@hotwired/stimulus';\nimport '@kanety/stimulus-static-actions';\n\nexport default class extends Controller {\n  static actions = [\n    ['element', 'mouseenter->on'],\n    ['element', 'mouseleave->off'],\n    ['element', 'mousemove->move']\n  ];\n\n  get image() {\n    return this.scope.findElement('img');\n  }\n\n  on(e) {\n    if (!this.canZoom()) return;\n    this.element.style.backgroundImage = `url(\"${this.image.src}\")`;\n    this.element.style.backgroundPosition = '0 0';\n    this.element.style.backgroundRepeat = 'no-repeat';\n    this.image.style.visibility = 'hidden';\n  }\n\n  off(e) {\n    if (!this.canZoom()) return;\n    this.element.style.backgroundImage = '';\n    this.element.style.backgroundPosition = '';\n    this.element.style.backgroundRepeat = '';\n    this.image.style.visibility = '';\n  }\n\n  move(e) {\n    if (!this.canZoom()) return;\n    let rect = this.element.getBoundingClientRect();\n    let x = (e.clientX - rect.left) / rect.width;\n    let y = (e.clientY - rect.top) / rect.height;\n    this.element.style.backgroundPosition = `${x*100}% ${y*100}%`;\n  }\n\n  canZoom() {\n    let rect = this.element.getBoundingClientRect();\n    return rect.width < this.image.naturalWidth || rect.height < this.image.naturalHeight;\n  }\n}\n"],"names":["_class","Controller","image","this","scope","findElement","on","e","canZoom","element","style","backgroundImage","src","backgroundPosition","backgroundRepeat","visibility","off","move","rect","getBoundingClientRect","clientX","left","width","clientY","top","height","naturalWidth","naturalHeight","actions"],"mappings":"wFAGe,MAAAA,UAAyBC,EAOlCC,YACF,OAAOC,KAAKC,MAAMC,YAAY,MAC/B,CAEDC,GAAGC,GACIJ,KAAKK,YACVL,KAAKM,QAAQC,MAAMC,gBAA0B,QAAAR,KAAKD,MAAMU,IAAxD,KACAT,KAAKM,QAAQC,MAAMG,mBAAqB,MACxCV,KAAKM,QAAQC,MAAMI,iBAAmB,YACtCX,KAAKD,MAAMQ,MAAMK,WAAa,SAC/B,CAEDC,IAAIT,GACGJ,KAAKK,YACVL,KAAKM,QAAQC,MAAMC,gBAAkB,GACrCR,KAAKM,QAAQC,MAAMG,mBAAqB,GACxCV,KAAKM,QAAQC,MAAMI,iBAAmB,GACtCX,KAAKD,MAAMQ,MAAMK,WAAa,GAC/B,CAEDE,KAAKV,GACH,GAAKJ,KAAKK,UAAV,CACA,IAAIU,EAAOf,KAAKM,QAAQU,wBAGxBhB,KAAKM,QAAQC,MAAMG,oBAFVN,EAAEa,QAAUF,EAAKG,MAAQH,EAAKI,MAEM,IAA7C,MADSf,EAAEgB,QAAUL,EAAKM,KAAON,EAAKO,OACiB,IAAvD,GAHA,CAID,CAEDjB,UACE,IAAIU,EAAOf,KAAKM,QAAQU,wBACxB,OAAWD,EAACI,MAAQnB,KAAKD,MAAMwB,cAAgBR,EAAKO,OAAStB,KAAKD,MAAMyB,aACzE,IArCMC,QAAU,CACf,CAAC,UAAW,kBACZ,CAAC,UAAW,mBACZ,CAAC,UAAW"}